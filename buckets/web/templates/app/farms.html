{% extends 'app/base.html' %}

{% block extrahead %}
{{ super() }}
<style>
.farm {
  display: flex;
  width: 100%;
  justify-content: flex-start;
  align-items: flex-start;
  margin-bottom: 1rem;
}
.farm > * {
  margin: 1rem;
}
.farm .name {
}
</style>
{% endblock %}

{% block title %}Farms{% endblock %}

{% block content %}
<h1>Farms</h1>

{% for farm in farms %}
<div class="farm">
  <a class="name" href="{{ url_for('farm.index', farm_id=farm.id) }}">{{ farm.name }}</a>
  <div class="pair">
    <div class="label">Expiration</div>
    <div class="value">{{ farm.service_expiration }}</div>
  </div>
  <div class="pair">
    <div class="label">Subscription</div>
    <div class="value">
    {% if not farm.payer_id %}
      <a href="{{ url_for('.farm_subscription', farm_id=farm.id) }}">
      Pay</a>
    {% elif farm.payer_id == g.user.id %}
      <a href="{{ url_for('.farm_subscription', farm_id=farm.id) }}">Manage subscription</a>
    {% else %}
      Someone else is paying for this.
    {% endif %}
    </div>
  </div>
</div>
{% endfor %}

{% endblock %}
